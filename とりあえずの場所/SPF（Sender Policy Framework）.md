# Sender Policy Framework（SPF）とは

## ✅ 概要
SPFは、送信ドメインが正規のメールサーバーから送られているかを判定し、なりすましメールを防ぐ技術。

---

## 🔧 仕組み
1. 送信者ドメインのDNSにSPFレコード（TXT）が設定されている
2. 受信側メールサーバーが、そのレコードを見て送信元IPを検証
3. 不正な送信元はブロック or スパム扱い

---

## 🧱 SPFレコードの例
```
v=spf1 ip4:203.0.113.1 include:_spf.example.com -all
```

- `v=spf1`：SPFのバージョン指定
- `ip4:`：許可するIPアドレス
- `include:`：信頼する外部サービス
- `-all`：他の送信元は拒否

---

## 🧪 SPFチェックの結果例

| 結果 | 意味 |
|------|------|
| Pass | 正当な送信 |
| Fail | 不正な送信（拒否） |
| SoftFail | あやしい送信（注意） |
| Neutral | 判定不能 |
| None | SPFレコード未設定 |

---

## ⚠ SPFの限界
- メール転送では失敗しやすい
- メール本文の改ざんまでは防げない
- DKIMやDMARCと**併用が推奨される**

> SPFは、メール送信の「身元確認」の第一歩。




# 例題
## 令和5年セキュリティマネジメント問6
迷惑メール対策の SPF（Sender Policy Framework）の仕組みはどれか。
1. 送信側ドメインの管理者が、正規の送信側メールサーバの IP アドレスを DNS に 登録し、受信側メールサーバでそれを参照して、IP アドレスの判定を行う。
2. 送信側メールサーバでメッセージにデジタル署名を施し、受信側メールサーバで そのデジタル署名を検証する。
3. 第三者によって提供されている、スパムメールの送信元 IP アドレスのデータベ ースを参照して，スパムメールの判定を行う。
4. ファイアウォールを通過した要求パケットに対する応答パケットかどうかを判断 して、動的に迷惑メールの通信を制御する。

## 答え
1. 正答
2. DKIM（DomainKeys Identified Mail）の説明
3. RBL（Realtime Blackhole List） や DNSBL（DNS-based Blackhole List） の説明
4. ステートフルインスペクション（Stateful Inspection） や ステートフルファイアウォールの動的パケットフィルタリング機能に関する説明